{% extends "sabuzz/base.html" %}
{% load form_filters %}

{% block title %}Register | SA Buzz{% endblock %}

{% block content %}

<div class="max-w-lg mx-auto bg-[#0b1525] dark:bg-[#112033] p-10 rounded-xl shadow-xl text-gray-200">

    <h2 class="text-3xl font-bold text-yellow-400 mb-8 text-center">
        Create an Account
    </h2>

    <form method="POST" class="space-y-6">
        {% csrf_token %}

        <!-- Username -->
        <div>
            <label class="block text-gray-300 mb-1">Username</label>
            {{ form.username|add_class:"w-full px-4 py-2 rounded-lg bg-[#112033] text-white border border-gray-600 focus:ring-2 focus:ring-yellow-400" }}
        </div>

        <!-- Email -->
        <div>
            <label class="block text-gray-300 mb-1">Email</label>
            {{ form.email|add_class:"w-full px-4 py-2 rounded-lg bg-[#112033] text-white border border-gray-600 focus:ring-2 focus:ring-yellow-400" }}
        </div>

        <!-- Password -->
        <div>
            <label class="block text-gray-300 mb-1">Password</label>
            {{ form.password1|add_class:"w-full px-4 py-2 rounded-lg bg-[#112033] text-white border border-gray-600 focus:ring-2 focus:ring-yellow-400" }}
        </div>

        <!-- Confirm Password -->
        <div>
            <label class="block text-gray-300 mb-1">Confirm Password</label>
            {{ form.password2|add_class:"w-full px-4 py-2 rounded-lg bg-[#112033] text-white border border-gray-600 focus:ring-2 focus:ring-yellow-400" }}
        </div>

        <!-- Account Type -->
        <div>
            <label class="block text-gray-300 mb-2 font-semibold">Account Type</label>
            <div class="space-y-2 text-white">
                {{ form.account_type }}
            </div>
        </div>

        <!-- Journalist Reason -->
        <div id="reasonBox" class="hidden">
            <label class="block text-gray-300 mb-1">Why do you want to be a journalist?</label>
            {{ form.reason|add_class:"w-full px-4 py-2 rounded-lg bg-[#112033] text-white border border-gray-600 focus:ring-2 focus:ring-yellow-400" }}
        </div>

        <!-- Submit -->
        <button
            class="w-full bg-yellow-400 text-black font-bold py-2 rounded-lg hover:bg-yellow-500 transition">
            Register
        </button>

    </form>
</div>

<script>
    const accountRadios = document.querySelectorAll("input[name='account_type']");
    const reasonBox = document.getElementById("reasonBox");

    function toggleReason() {
        const selected = document.querySelector("input[name='account_type']:checked");
        reasonBox.classList.toggle("hidden", selected.value !== "journalist");
    }

    accountRadios.forEach(r => r.addEventListener("change", toggleReason));
    toggleReason(); // run on load
</script>

{% endblock %}

