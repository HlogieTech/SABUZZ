{% extends "sabuzz/base.html" %}

{% block title %}{{ post.title }} | SA Buzz{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto">

    <!-- POST TITLE -->
    <h1 class="text-4xl font-bold mb-4">{{ post.title }}</h1>

    <!-- POST AUTHOR & DATE -->
    <p class="text-gray-400 mb-6">
        Posted by <span class="font-semibold">{{ post.author.username }}</span>
        • {{ post.created_at|date:"F j, Y" }}
    </p>

    <!-- POST CONTENT -->
    <div class="bg-white dark:bg-[#112033] p-6 rounded-lg shadow-md mb-10">
        {{ post.content|linebreaks }}
    </div>

    <!-- COMMENTS SECTION -->
    <h2 class="text-2xl font-bold mb-4">Comments</h2>

    <!-- LIST COMMENTS -->
    {% for c in comments %}
        <div class="bg-gray-100 dark:bg-[#0b1525] p-4 rounded-lg mb-3">
            <p class="font-semibold">{{ c.user.username }}</p>
            <p>{{ c.content }}</p>
            <p class="text-gray-400 text-sm">{{ c.created_at|date:"F j, Y, g:i A" }}</p>
        </div>
    {% empty %}
        <p class="text-gray-400">No comments yet — be the first to comment!</p>
    {% endfor %}

    <!-- ADD COMMENT (only logged in) -->
    {% if user.is_authenticated %}
    <form method="POST" class="mt-6 bg-white dark:bg-[#112033] p-6 rounded-lg shadow-lg">
        {% csrf_token %}
        <textarea name="content" class="w-full p-3 border rounded-lg" rows="4"
                  placeholder="Write your comment..." required></textarea>
        <button class="mt-3 bg-yellow-500 hover:bg-yellow-600 text-black px-5 py-2 rounded-lg font-semibold">
            Post Comment
        </button>
    </form>
    {% else %}
        <p class="mt-4">
            <a href="{% url 'login' %}" class="text-yellow-400 underline">Login to comment</a>
        </p>
    {% endif %}

</div>
{% endblock %}


