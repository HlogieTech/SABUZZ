{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://cdn.tailwindcss.com"></script>

    <title>{% block title %}SA Buzz{% endblock %}</title>

    <style>
        /* DARK MODE COLORS */
        body.dark-mode { background-color: #0b1525 !important; color: #f0f0f0 !important; }
        nav.dark-mode { background-color: #0a1421 !important; color: white !important; }
        .dropdown.dark-mode { background-color: #112033 !important; }
        .card.dark-mode { background-color: #112033 !important; }
    </style>
</head>

<body class="bg-white text-gray-900">

<!-- NAVBAR -->
<nav id="navbar" class="bg-white text-gray-900 py-4 shadow-md">
    <div class="container mx-auto px-6 flex justify-between items-center">

        <!-- LOGO -->
        <a href="{% url 'home' %}" class="flex items-center">
            <h1 class="text-2xl font-bold text-yellow-500">SA Buzz</h1>
        </a>

        <!-- NAV ITEMS -->
        <ul class="flex space-x-6 font-medium items-center">

            <!-- Home always visible -->
            <li><a href="{% url 'home' %}" class="hover:text-yellow-500">Home</a></li>

           
            {% if user.is_authenticated and user.is_superuser %}
                <li class="relative group">
    <button class="px-3 py-1 bg-red-100 text-red-600 rounded-lg font-semibold select-none">
        Manage â–¾
    </button>

    <div class="dropdown absolute left-0 mt-2 w-48 bg-white rounded-lg shadow 
                opacity-0 invisible group-hover:opacity-100 group-hover:visible 
                transition-all duration-200 z-50 p-3 space-y-1">

        <a href="{% url 'comments_list' %}" class="block hover:text-yellow-500">Manage Comments</a>
        <a href="{% url 'pending_posts' %}" class="block hover:text-yellow-500">Approve Posts</a>
        <a href="{% url 'journalist_requests' %}" class="block hover:text-yellow-500">Approve Journalists</a>
    </div>
</li>


                <li><a href="{% url 'dashboard' %}" class="hover:text-yellow-500">Dashboard</a></li>
            
          

                <li><a href="{% url 'logout' %}" class="text-red-500 font-semibold">Logout</a></li>

          
            {% elif user.is_authenticated and is_journalist %}
                <li><a href="{% url 'add_post' %}" class="hover:text-yellow-500">Write Post</a></li>
                <li><a href="{% url 'logout' %}" class="text-red-500 font-semibold">Logout</a></li>

            
            {% else %}
                <!-- Categories (visible for normal users) -->
                <li class="relative group">
    <button class="px-3 py-1 bg-gray-200 rounded-lg font-semibold select-none">
        Categories â–¾
    </button>

    <div class="dropdown absolute left-0 mt-2 w-40 bg-white rounded-lg shadow 
                opacity-0 invisible group-hover:opacity-100 group-hover:visible 
                transition-all duration-200 z-50 p-3 space-y-1">
        
        <a href="{% url 'category' 'sports' %}" class="block hover:text-yellow-400">Sports</a>
        <a href="{% url 'category' 'technology' %}" class="block hover:text-yellow-400">Technology</a>
        <a href="{% url 'category' 'entertainment' %}" class="block hover:text-yellow-400">Entertainment</a>
        <a href="{% url 'category' 'business' %}" class="block hover:text-yellow-400">Business</a>
        <a href="{% url 'category' 'politics' %}" class="block hover:text-yellow-400">Politics</a>
        <a href="{% url 'category' 'top' %}" class="block hover:text-yellow-400">Trending</a>
    </div>
</li>


                <li><a href="{% url 'about' %}" class="hover:text-yellow-500">About</a></li>
                <li><a href="{% url 'contact' %}" class="hover:text-yellow-500">Contact</a></li>

                {% if user.is_authenticated %}
                    <li><a href="{% url 'saved_articles' %}" class="hover:text-yellow-500">Saved</a></li>
                    <li><a href="{% url 'logout' %}" class="text-red-500 font-semibold">Logout</a></li>
                {% else %}
                    <li><a href="{% url 'login' %}" class="hover:text-yellow-500">Login</a></li>
                    <li><a href="{% url 'register' %}" class="text-yellow-500 font-semibold">Register</a></li>
                {% endif %}
            {% endif %}
        </ul>

        <!-- WEATHER + DARK MODE -->
        <div class="flex items-center space-x-4">
            {% if global_weather and global_weather.temperature %}
                <div id="weatherBox" class="px-3 py-1 rounded-lg bg-gray-200 text-gray-900">
                    ğŸŒ¤ï¸ JHB: {{ global_weather.temperature }}Â°C
                </div>
            {% endif %}

            <button id="darkToggle" class="px-3 py-1 rounded-lg bg-yellow-400 text-black font-semibold">ğŸŒ™</button>
        </div>

    </div>
</nav>

<!-- PAGE CONTENT -->
<div class="container mx-auto px-6 py-10">
    {% block content %}{% endblock %}
</div>

<!-- DARK MODE SCRIPT -->
<script>
    const btn = document.getElementById("darkToggle");
    const navbar = document.getElementById("navbar");
    const dropdowns = document.querySelectorAll(".dropdown");
    const weatherBox = document.getElementById("weatherBox");

    function enableDark() {
        document.body.classList.add("dark-mode");
        if (navbar) navbar.classList.add("dark-mode");
        dropdowns.forEach(d => d.classList.add("dark-mode"));
        if (weatherBox) weatherBox.classList.add("dark-mode");
        localStorage.setItem("darkmode", "on");
    }

    function disableDark() {
        document.body.classList.remove("dark-mode");
        if (navbar) navbar.classList.remove("dark-mode");
        dropdowns.forEach(d => d.classList.remove("dark-mode"));
        if (weatherBox) weatherBox.classList.remove("dark-mode");
        localStorage.setItem("darkmode", "off");
    }

    if (localStorage.getItem("darkmode") === "on") enableDark();

    if (btn) {
        btn.addEventListener("click", () => {
            document.body.classList.contains("dark-mode") ? disableDark() : enableDark();
        });
    }
</script>
<!-- FOOTER -->
<!-- FOOTER -->
<footer class="bg-[#0b1525] text-white mt-16 py-10">

    <div class="container mx-auto px-6 flex flex-col md:flex-row justify-between items-start md:items-center">

        <!-- BRAND / DESCRIPTION -->
        <div class="mb-6 md:mb-0 max-w-sm">
            <h2 class="text-xl font-bold text-yellow-400 mb-2">SA Buzz</h2>
            <p class="text-gray-400 text-sm">
                Your trusted source for South African news â€” fast, reliable, and always up-to-date.
            </p>
        </div>

        <!-- FOLLOW US -->
        <div class="flex flex-col items-start md:items-end">
            <h3 class="text-lg font-semibold mb-2">Follow Us</h3>
            <div class="flex space-x-4 text-2xl">
                <a href="#" class="hover:text-yellow-400">ğŸŒ</a>
                <a href="#" class="hover:text-yellow-400">ğŸ¦</a>
                <a href="#" class="hover:text-yellow-400">ğŸ“¸</a>
                <a href="#" class="hover:text-yellow-400">â–¶ï¸</a>
            </div>
        </div>

    </div>

    <!-- COPYRIGHT -->
    <div class="text-center text-gray-500 mt-8 pt-5 border-t border-gray-700 text-sm">
        Â© {% now "Y" %} SA Buzz. All rights reserved.
    </div>

</footer>



</body>
</html>

